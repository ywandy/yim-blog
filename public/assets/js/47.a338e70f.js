(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{594:function(t,a,r){"use strict";r.r(a);var s=r(13),_=Object(s.a)({},(function(){var t=this,a=t.$createElement,r=t._self._c||a;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h2",{attrs:{id:"前言"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[t._v("#")]),t._v(" 前言")]),t._v(" "),r("p",[t._v("参照官方文档")]),t._v(" "),r("p",[r("strong",[t._v("https://github.com/apache/rocketmq/tree/master/docs/cn")])]),t._v(" "),r("p",[t._v("消息消费顺序是指定顺序，同一个topic遵循FIFO（first in first out 先进先出）原则，不同topic之间可以并行消费")]),t._v(" "),r("hr"),t._v(" "),r("h2",{attrs:{id:"rocketmq基本原理"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#rocketmq基本原理"}},[t._v("#")]),t._v(" RocketMQ基本原理")]),t._v(" "),r("p",[t._v("Broker推送Topic到NameSrv")]),t._v(" "),r("p",[t._v("Producer推送Topic到Broker")]),t._v(" "),r("p",[t._v("Consumer从Broker中获取对应的Topic进行消费")]),t._v(" "),r("p",[t._v("NameSrv定时发送心跳包检测alive的Broker，对非活动的Broker进行下线处理，定时清除")]),t._v(" "),r("p",[r("img",{attrs:{src:"https://pic-1304161434.cos.ap-guangzhou.myqcloud.com/img/202202152147748.png",alt:"部署方式"}})]),t._v(" "),r("hr"),t._v(" "),r("h2",{attrs:{id:"发送消息的方式"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#发送消息的方式"}},[t._v("#")]),t._v(" 发送消息的方式")]),t._v(" "),r("h3",{attrs:{id:"_1-同步发送"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_1-同步发送"}},[t._v("#")]),t._v(" 1.同步发送")]),t._v(" "),r("h3",{attrs:{id:"_2-异步发送"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2-异步发送"}},[t._v("#")]),t._v(" 2.异步发送")]),t._v(" "),r("h3",{attrs:{id:"_3-单向发送-多用于日志发送"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_3-单向发送-多用于日志发送"}},[t._v("#")]),t._v(" 3.单向发送（多用于日志发送）")]),t._v(" "),r("hr"),t._v(" "),r("h2",{attrs:{id:"topic跟tag的区别"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#topic跟tag的区别"}},[t._v("#")]),t._v(" Topic跟tag的区别")]),t._v(" "),r("p",[t._v("topic是一级菜单，tag是二级菜单。")]),t._v(" "),r("p",[t._v("eg：不同物流平台的订单是不同的topic，同一平台的不同模块的订单是不同的tag，不同topic之间的tag是完全隔离的。")]),t._v(" "),r("h4",{attrs:{id:"到底什么时候该用-topic-什么时候该用-tag"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#到底什么时候该用-topic-什么时候该用-tag"}},[t._v("#")]),t._v(" 到底什么时候该用 Topic，什么时候该用 Tag？")]),t._v(" "),r("h5",{attrs:{id:"_1、消息类型是否一致"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_1、消息类型是否一致"}},[t._v("#")]),t._v(" 1、消息类型是否一致")]),t._v(" "),r("p",[t._v("如普通消息，事务消息，定时消息，顺序消息，不同的消息类型使用不同的 Topic，无法通过 Tag 进行区分。")]),t._v(" "),r("h5",{attrs:{id:"_2、业务是否相关联"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2、业务是否相关联"}},[t._v("#")]),t._v(" 2、业务是否相关联")]),t._v(" "),r("p",[t._v("没有直接关联的消息，如淘宝交易消息，京东物流消息使用不同的 Topic 进行区分；而同样是天猫交易消息，电器类订单、女装类订单、化妆品类订单的消息可以用 Tag 进行区分。")]),t._v(" "),r("h5",{attrs:{id:"_3、消息优先级是否一致"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_3、消息优先级是否一致"}},[t._v("#")]),t._v(" 3、消息优先级是否一致")]),t._v(" "),r("p",[t._v("如同样是物流消息，盒马必须小时内送达，天猫超市 24 小时内送达，淘宝物流则相对会会慢一些，不同优先级的消息用不同的 Topic 进行区分。")]),t._v(" "),r("h5",{attrs:{id:"_4、消息量级是否相当"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_4、消息量级是否相当"}},[t._v("#")]),t._v(" 4、消息量级是否相当")]),t._v(" "),r("p",[t._v('有些业务消息虽然量小但是实时性要求高，如果跟某些万亿量级的消息使用同一个 Topic，则有可能会因为过长的等待时间而"饿死"，此时需要将不同量级的消息进行拆分，使用不同的 Topic。')])])}),[],!1,null,null,null);a.default=_.exports}}]);