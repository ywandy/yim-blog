(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{612:function(t,a,s){"use strict";s.r(a);var _=s(13),v=Object(_.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"_1-前言"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-前言"}},[t._v("#")]),t._v(" 1.前言")]),t._v(" "),s("p",[t._v("​\t\t前段时间心血来潮，想自己买个nas回来玩玩，但又想省钱，一开始是买了一个白群的ds110J，开始就是奔着这个docker功能去的，买回来之后发现不能安装docker，毅然决定退货，退回去了，商家说有个划痕，减了50，终于退款成功了，这个过程我是一脸懵逼的，不是所有的群辉都可以用docker的吗？原来是arm架构的不行，要x86的才行。")]),t._v(" "),s("p",[t._v("​\t\t没办法，只能在闲鱼淘一个黑群了。")]),t._v(" "),s("p",[t._v("​\t\t在闲鱼上跟很多人聊了，也碰到了几个恶心的人，明明下单发货了，发货那天说不发了，没时间，叫我取消订单，整个人裂开，浪费时间。后来看到一个460多的4盘位，跟别的差不多，因为我对配置不是太了解，在朋友的怂恿下就买了。好在价格也不太贵，卖家也愿意线下交货，到公元前站把这个10斤的大铁块就搬回家了~")]),t._v(" "),s("p",[t._v("​\t\t搬回家之后就趁热打铁开始整备，先是看看系统有没有问题，然后还原系统...然后就...没有然后了")]),t._v(" "),s("p",[t._v("​\t\t"),s("strong",[t._v("--成功地把系统给整崩了--")])]),t._v(" "),s("p",[t._v("​\t\t整个人是崩溃的，那天从晚上11点搞到凌晨5点，终于把系统搞回半白，后面熬不住终于也一直没管这个大铁块了。")]),t._v(" "),s("p",[t._v("​\t\t"),s("strong",[t._v("就是这个大铁块↓")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://pic-1304161434.cos.ap-guangzhou.myqcloud.com/img/202201271023839.jpg",alt:"星际蜗牛黑群晖"}})]),t._v(" "),s("p",[t._v("​\t\t这个东西其实也就是一个主机而已，没什么特别的东西，就是硬盘位比较多，而且能装群晖系统。")]),t._v(" "),s("hr"),t._v(" "),s("h2",{attrs:{id:"_2-开端"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-开端"}},[t._v("#")]),t._v(" 2.开端")]),t._v(" "),s("p",[t._v("​\t\t后面又心血来潮，决定把整个大铁块废弃掉了，准备买一个白群晖算了，然后就入手了群晖的ds218+。这次终于有正宗的docker了，运行docker需要4G以上的RAM，还好上家用户有一条4G的，加起来是6G，还不错，￥1500大洋。")]),t._v(" "),s("p",[t._v("​\t\t买回来就赶紧配置，正好又遇上加班潮，配置了2周，总算将东西配置好了。下一章详细说说配置的过程。")]),t._v(" "),s("hr"),t._v(" "),s("h2",{attrs:{id:"_3-正文"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-正文"}},[t._v("#")]),t._v(" 3.正文")]),t._v(" "),s("h3",{attrs:{id:"_3-1-光猫-路由篇"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-光猫-路由篇"}},[t._v("#")]),t._v(" 3.1 光猫+路由篇")]),t._v(" "),s("p",[s("em",[t._v("真的是折腾啊...")])]),t._v(" "),s("h4",{attrs:{id:"a-向宽带服务商申请公网ip"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#a-向宽带服务商申请公网ip"}},[t._v("#")]),t._v(" A.向宽带服务商申请公网ip")]),t._v(" "),s("p",[t._v("​\t\t这里以电信为例，直接拨打10000号跟客服说要申请公网ip，就会有专门的工程人员帮忙恢复公网的ip，但是现在还不能直接使用，要重启光猫。")]),t._v(" "),s("h4",{attrs:{id:"b-配置路由拨号桥接光猫"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#b-配置路由拨号桥接光猫"}},[t._v("#")]),t._v(" B.配置路由拨号桥接光猫")]),t._v(" "),s("p",[t._v("​\t\t跟朋友沟通了一下，说光猫拨号会影响无线网络的性能，所以毅然购买了网件的R6300V2，刷了梅林系统，本来是想用内置的fq工具，后面发现这个功能不太稳定，所以就弃用了。")]),t._v(" "),s("p",[t._v("​\t\t购买了路由器之后，由于要设置成路由拨号，光猫桥接的方式，在网上找了很多资料，具体操作流程如下：")]),t._v(" "),s("h5",{attrs:{id:"光猫端"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#光猫端"}},[t._v("#")]),t._v(" 光猫端")]),t._v(" "),s("p",[t._v("​\t\t1.网线一端插到光猫wan口，一端插到电脑网卡网口。到光猫后台，一般是192.168.1.1，输入超级管理员账号与密码。")]),t._v(" "),s("div",{staticClass:"language-json line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  username"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("xxx\n  password"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("xxx\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("p",[t._v("​\t\t2.进入光猫设置界面后，点击“网络”菜单，默认进入宽带设置界面。")]),t._v(" "),s("p",[t._v("​\t\t3.当你想把光猫设置为桥接模式时候，在用户名称那里选择 2_INTERNET_B_VID_41,下面的参数保持默认的情况，直接在左下角点击“保存”按钮就行了。")]),t._v(" "),s("p",[t._v("​\t\t4.当你想把光猫设置为路由模式的时候，在用户名称那里同样选择 2_INTERNET_B_VID_41，然后进行参数的更改。首先连接模式选择路由，之后会出现用户名和密码输入栏，在用户名那里输入宽带连接的账号，密码输入宽带的密码；其他参数保持不变，点击保存按钮，然后重新启动路由器就行了。")]),t._v(" "),s("p",[t._v("​\t\t5.还有一个步骤，非常的关键，就是把路由模式后面的dhcp取消掉，就是因为这个，折腾了3天。。。进入光猫设置界面后，点击“网络”菜单，然后点击“网络”菜单下的“用户侧管理”进入光猫IP地址设置界面")]),t._v(" "),s("p",[t._v("​\t\t6.在用户侧管理界面可以根据自己的需要修改光猫的本地IP地址，如果想要关闭光猫的DHCP地址分配功能请把“启用DHCP Server”前面的打钩去掉；修改完之后请记得点击“保存”按钮之后再重启光猫")]),t._v(" "),s("h5",{attrs:{id:"路由器端"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#路由器端"}},[t._v("#")]),t._v(" 路由器端")]),t._v(" "),s("p",[t._v("​\t\t1.把刚刚接在光猫上的网线接到路由器的lan口，再找一条网线，一端接到光猫的wan口，一端接到路由器的lan口。这样的话，一个完整的链路就完成了，从光猫开始，到路由器，再到台式机器。")]),t._v(" "),s("p",[t._v("​\t\t"),s("strong",[t._v("光猫的网段是192.168.1.x")])]),t._v(" "),s("p",[t._v("​\t\t"),s("strong",[t._v("路由器的网段是192.168.50.x")])]),t._v(" "),s("p",[t._v("​\t\t"),s("strong",[t._v("所以台式机器的网段也是50网段")])]),t._v(" "),s("p",[t._v("​\t\t"),s("em",[t._v("这里要注意一个事情， 当台式机网线连接到路由器的时候，就不能直接通过192.168.1.1连接到光猫了，因为不同的网段不能直接连，这个问题后续可能需要用光猫的wifi功能，或者是别的方式解决，有待考究啊。")])]),t._v(" "),s("p",[t._v("​\t\t2.由于路由器的固件是梅林，首先在wan端设置路由器拨号。首先设置上网模式是桥接模式，输入宽带用户名密码；然后设置dhcp，默认就好了。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://pic-1304161434.cos.ap-guangzhou.myqcloud.com/img/202201271023669.JPG",alt:"路由器的wan设置"}})]),t._v(" "),s("p",[s("img",{attrs:{src:"https://pic-1304161434.cos.ap-guangzhou.myqcloud.com/img/202201271023801.JPG",alt:"路由器的lan设置"}})]),t._v(" "),s("p",[t._v("​\t\t3.重启路由器，完事。")]),t._v(" "),s("p",[s("strong",[t._v("就这么简单。")])]),t._v(" "),s("p",[s("em",[t._v("最后的路由器跟光猫的连接如下所示")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://pic-1304161434.cos.ap-guangzhou.myqcloud.com/img/202201271023539.JPG",alt:"光猫接线"}})]),t._v(" "),s("p",[s("img",{attrs:{src:"https://pic-1304161434.cos.ap-guangzhou.myqcloud.com/img/202201271023116.JPG",alt:"路由接线"}})]),t._v(" "),s("hr"),t._v(" "),s("h3",{attrs:{id:"_3-2-腾讯云配置-nas篇"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-腾讯云配置-nas篇"}},[t._v("#")]),t._v(" 3.2 腾讯云配置+Nas篇")]),t._v(" "),s("p",[t._v("在配置nas之前，先上腾讯云申请一个域名，绑定https证书。￥121就有5年的域名了。")]),t._v(" "),s("h4",{attrs:{id:"a-腾讯云"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#a-腾讯云"}},[t._v("#")]),t._v(" A.腾讯云")]),t._v(" "),s("h5",{attrs:{id:"_1-获取密钥"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-获取密钥"}},[t._v("#")]),t._v(" 1.获取密钥")]),t._v(" "),s("p",[t._v("登陆 "),s("a",{attrs:{href:"https://www.dnspod.cn/",target:"_blank",rel:"noopener noreferrer"}},[t._v("DNSPod.cn"),s("OutboundLink")],1),t._v(" 管理控制台 - "),s("code",[t._v("右上角")]),t._v(" - 安全设置 - "),s("code",[t._v("左侧导航")]),t._v(" - 密钥管理 - 创建密钥")]),t._v(" "),s("h5",{attrs:{id:"_2-创建-ddns-域名"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-创建-ddns-域名"}},[t._v("#")]),t._v(" 2.创建 DDNS 域名")]),t._v(" "),s("p",[t._v("为 DDNS 单独创建一个域名，设置 A 记录到任意 IP ，本文以www.concayim.com为例。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://pic-1304161434.cos.ap-guangzhou.myqcloud.com/img/202201271023238.png",alt:"腾讯云ddns控制台"}})]),t._v(" "),s("p",[t._v("主机记录就写www，记录类型写A，记录值随便填，填1.1.1.1就行了，后面会自动改变。")]),t._v(" "),s("p",[s("strong",[t._v("--基础网络已经打通了--")])]),t._v(" "),s("h4",{attrs:{id:"b-nas"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#b-nas"}},[t._v("#")]),t._v(" B.Nas")]),t._v(" "),s("h5",{attrs:{id:"_1-组装机器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-组装机器"}},[t._v("#")]),t._v(" 1.组装机器")]),t._v(" "),s("p",[t._v("nas到手，先打开硬盘仓， 把硬盘按照合适的位置装上去，拿一条网线，一端接到nas的网口，一端接到路由的lan口上。开机等系统重新安装。")]),t._v(" "),s("h5",{attrs:{id:"_2-打开ssh连接"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-打开ssh连接"}},[t._v("#")]),t._v(" 2.打开ssh连接")]),t._v(" "),s("p",[t._v("在系统中配置打开ssh连接，端口是22。")]),t._v(" "),s("h5",{attrs:{id:"_3-安装docker"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-安装docker"}},[t._v("#")]),t._v(" 3.安装docker")]),t._v(" "),s("h5",{attrs:{id:"_4-创建配置文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-创建配置文件"}},[t._v("#")]),t._v(" 4.创建配置文件")]),t._v(" "),s("p",[t._v("群晖 NAS 中使用"),s("strong",[t._v("文本编辑器")]),t._v("在任意位置创建任意文件，本文以"),s("code",[t._v("/docker/dnspod")]),t._v("为例.复制粘贴以下配置信息，"),s("code",[t._v("并修改前三项")]),t._v("，"),s("code",[t._v("后三项选填")]),t._v("，可保持默认。")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("LOGIN_TOKEN=token_id,token\nDOMAIN=domain.com\nSUB_DOMAIN=www\nINTERVAL=5\nEMAIL=you@email.com\nIP_COUNT=1\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br")])]),s("ul",[s("li",[t._v("token_id,token是上面腾讯云初始化的id和token，以逗号分隔")]),t._v(" "),s("li",[t._v("DOMAIN是域名")]),t._v(" "),s("li",[t._v("SUB_DOMAIN是前缀")])]),t._v(" "),s("h5",{attrs:{id:"_5-保存配置文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-保存配置文件"}},[t._v("#")]),t._v(" 5.保存配置文件")]),t._v(" "),s("p",[t._v("保存任意文件格式及位置，无需指定文件后缀名。")]),t._v(" "),s("h5",{attrs:{id:"_6-启动ddns容器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-启动ddns容器"}},[t._v("#")]),t._v(" 6.启动ddns容器")]),t._v(" "),s("p",[t._v("A.群晖 docker - 注册表\nB.搜索"),s("code",[t._v("dnspod")]),t._v("找到"),s("code",[t._v("strahe/dnspod-ddns")]),t._v("并下载"),s("code",[t._v("latest")]),t._v("最新版.")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://pic-1304161434.cos.ap-guangzhou.myqcloud.com/img/202201271023335.png",alt:"docker镜像"}})]),t._v(" "),s("p",[t._v("C.高级设置 - 勾选启用自动重新启动")]),t._v(" "),s("p",[t._v("D.添加"),s("code",[t._v("文件")]),t._v(",注意并非"),s("code",[t._v("文件夹")]),t._v(",选择上文创建的"),s("code",[t._v("dnspod")]),t._v("文件,挂载路径为"),s("code",[t._v("/etc/dnspod/ddnsrc")]),t._v(".")]),t._v(" "),s("p",[t._v("E."),s("strong",[t._v("配置完成,容器启动并查看详情.")])]),t._v(" "),s("hr"),t._v(" "),s("h2",{attrs:{id:"_4-结语"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-结语"}},[t._v("#")]),t._v(" 4.结语")]),t._v(" "),s("p",[t._v("配置完成了。")]),t._v(" "),s("p",[t._v("折腾")])])}),[],!1,null,null,null);a.default=v.exports}}]);